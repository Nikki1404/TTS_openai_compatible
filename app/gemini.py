still getting this 

{
  "detail": "An error occurred while processing the file: Failed to persist dashboard entries: (sqlite3.IntegrityError) NOT NULL constraint failed: dashboard_data.wer_score\n[SQL: INSERT INTO dashboard_data (id, audio_file_name, audio_length, model, ground_truth, transcription, wer_score, inference_time, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]\n[parameters: [('167c2a79-a5bb-428f-ae2a-045652f9b24f', 'Auto - Normal_mono', 24240.0, 'whisper_distil', \"All right, this is General Aaron. I am speaking with Sandra Soul on September 20th, 2022 at 11:58 AM Eastern Time. The statement may be used by any e ... (5409 characters truncated) ... let us know, OK OK, I will do that. Alright Sandra, we'll try to have a good rest of the week, OK Alright, thank you, my pleasure. Bye, bye, bye bye.\", \" All right, this is Joe Arendt. I am speaking with Sandra Soule on September 20th, 2022, at 1158 a.m. Eastern Time. This statement may be used by any ... (5547 characters truncated) ... ill do that. All right, Sandra. We'll try to have a good rest of the week, okay? All right, thank you. My pleasure. Bye-bye. Bye. Bye-bye. Thank you.\", 0.32, 5.91, 'anonymous'), ('a6fa25bf-31bc-45ff-8d07-2d2f099f3c72', 'Auto - Normal_mono', 24241.0, 'whisper_turbo', \"All right, this is General Aaron. I am speaking with Sandra Soul on September 20th, 2022 at 11:58 AM Eastern Time. The statement may be used by any e ... (5409 characters truncated) ... let us know, OK OK, I will do that. Alright Sandra, we'll try to have a good rest of the week, OK Alright, thank you, my pleasure. Bye, bye, bye bye.\", '\" All right, this is Joe Arendt. I am speaking with Sandra Soule on September 20th, 2022, at 1158 a.m. Eastern Time. This statement may be used by an ... (5589 characters truncated) ... l do that. All right, Sandra. We\\'ll try to have a good rest of the week, okay? All right, thank you. My pleasure. Bye-bye. Bye. Bye-bye. Thank you.\"', 0.29, 9.27, 'anonymous'), ('1c0b7bf5-f51a-41dc-8343-533408f837ba', 'Auto - Normal_mono', 24242.0, 'parakeet_tdt_1.1', \"All right, this is General Aaron. I am speaking with Sandra Soul on September 20th, 2022 at 11:58 AM Eastern Time. The statement may be used by any e ... (5409 characters truncated) ... let us know, OK OK, I will do that. Alright Sandra, we'll try to have a good rest of the week, OK Alright, thank you, my pleasure. Bye, bye, bye bye.\", \"all right this is general arend i am speaking with sandra sow on september twentieth two thousand and twenty two at eleven fifty eight am eastern tim ... (5341 characters truncated) ...  us know okay okay i will do that all right sandra we'll try to have a good rest of the week okay all right thank you my pleasure bye bye bye bye bye\", 0.13, 5.4, 'anonymous'), ('a3d8cfbe-a69b-414b-b43f-39803d4d386a', 'Auto - Normal_mono', 24243.0, 'canary', \"All right, this is General Aaron. I am speaking with Sandra Soul on September 20th, 2022 at 11:58 AM Eastern Time. The statement may be used by any e ... (5409 characters truncated) ... let us know, OK OK, I will do that. Alright Sandra, we'll try to have a good rest of the week, OK Alright, thank you, my pleasure. Bye, bye, bye bye.\", \"All right, this is Joe Errant. I am speaking with Sandra Seoul on september twentieth, twenty twenty two at eleven fifty eight eastern time. This sta ... (851 characters truncated) ... ve got a turn. I've got a turn. I've got a turn. I've got a turn. I've got a turn. I've got a turn I've got a turn. I've got a turn I've got a turn I\", 0.94, 18.08, 'anonymous'), ('6fc90c79-4c27-4d42-b05d-ec1e60490cf6', 'Auto - Normal_mono', 24244.0, 'parakeet_tdt_CTC_110', \"All right, this is General Aaron. I am speaking with Sandra Soul on September 20th, 2022 at 11:58 AM Eastern Time. The statement may be used by any e ... (5409 characters truncated) ... let us know, OK OK, I will do that. Alright Sandra, we'll try to have a good rest of the week, OK Alright, thank you, my pleasure. Bye, bye, bye bye.\", \"All Right, This is Joe Arendt. I am speaking with Sandra Sole on September 20, 2022, at 11:58 a.m., Eastern Time. This statement may be used by any e ... (5251 characters truncated) ...  I will do that. All right, Sandra, we'll try to have a good rest of the week. Okay? All right, thank you. My pleasure. Bye bye. Bye bye. Thank you. \", 0.12, 2.9, 'anonymous'), ('eed5203d-6a23-43ea-a5bb-022c95aefcdf', 'Auto - Normal_mono', 24245.0, 'parakeet-rnnt-1.1b-en-US-asr', \"All right, this is General Aaron. I am speaking with Sandra Soul on September 20th, 2022 at 11:58 AM Eastern Time. The statement may be used by any e ... (5409 characters truncated) ... let us know, OK OK, I will do that. Alright Sandra, we'll try to have a good rest of the week, OK Alright, thank you, my pleasure. Bye, bye, bye bye.\", '\"All right, this is Joan Arendt. I am speaking with Sandra Sole on September 20, 2022, at 11:58 a.m., Eastern Time. This statement may be used by any ... (4259 characters truncated) ... g, once you make a decision on the shop, just let us know. Okay, okay, I will do that. All right, Sandra, we\\'ll try to have. My pleasure. Bye bye. \"', 0.28, 9.95, 'anonymous'), ('9dc49557-68c2-43ad-9617-b1d87adece99', 'Auto - Normal_mono', 24246.0, 'riva (parakeet CTC 1.1b telephony)', \"All right, this is General Aaron. I am speaking with Sandra Soul on September 20th, 2022 at 11:58 AM Eastern Time. The statement may be used by any e ... (5409 characters truncated) ... let us know, OK OK, I will do that. Alright Sandra, we'll try to have a good rest of the week, OK Alright, thank you, my pleasure. Bye, bye, bye bye.\", \"Right, This is Joe Arendt. I am speaking with Sandra Sole on September 20, 2022, at 11:58 a.m., Eastern Time. This statement may be used by any emplo ... (5247 characters truncated) ...  I will do that. All right, Sandra, we'll try to have a good rest of the week. Okay? All right, thank you. My pleasure. Bye bye. Bye bye. Thank you. \", 0.12, 2.8, 'anonymous'), ('bde73608-82b6-411d-9790-a93d981163ba', 'Auto - Normal_mono', 24247.0, 'azure (fast transcription API)', \"All right, this is General Aaron. I am speaking with Sandra Soul on September 20th, 2022 at 11:58 AM Eastern Time. The statement may be used by any e ... (5409 characters truncated) ... let us know, OK OK, I will do that. Alright Sandra, we'll try to have a good rest of the week, OK Alright, thank you, my pleasure. Bye, bye, bye bye.\", \"All right, this is Joe Arendt. I am speaking with Sandra Sole on September 20th, 2022 at 11.58 A.m. Eastern Time. The statement may be used by any em ... (5391 characters truncated) ... ay? Okay. I will do that. Alright, Sandra. We'll try to have a good rest of the week, okay? All right, thank you. My pleasure. Bye-bye. Bye. Bye-bye.\", 0.18, 19.09, 'anonymous')  ... displaying 10 of 47 total bound parameter sets ...  ('f852239a-f755-4939-a53d-464142b0d0dd', 'Property - Poor Quality_mono', 109260.0, 'azure (fast transcription API)', \"Hi, this is Lauren calling with Farmers Insurance. How are you? I'm doing well. I was giving you a call about the claim. Is now a good time? Yeah, it ... (15386 characters truncated) ... ail here shortly and then just let me know if you have any questions, OK? Yeah, thank you. Alright, thank you. Take care. Talk to you soon. Bye bye. \", \"Hello. Hi, this is Lauren calling with Farmers Insurance. How are you? I'm doing well. I was giving you a call about the claim. Is now a good time? Y ... (15544 characters truncated) ... here shortly, and then just let me know if you have any questions, okay? Yeah, thank you. All right. Thank you. Take care. Talk to you soon. Bye-bye.\", 0.36, 42.62, 'anonymous'), ('47db0bd4-2540-4f9e-8ab4-a48e588f8db4', 'Property - Poor Quality_mono', 112860.0, 'google (generic batch transcription API)', \"Hi, this is Lauren calling with Farmers Insurance. How are you? I'm doing well. I was giving you a call about the claim. Is now a good time? Yeah, it ... (15386 characters truncated) ... ail here shortly and then just let me know if you have any questions, OK? Yeah, thank you. Alright, thank you. Take care. Talk to you soon. Bye bye. \", \"hello hi this is Lauren coaling with Farmers Insurance how are you  I'm doing well  I was giving you a call about the claim is now a good time  yeah  ... (8343 characters truncated) ... ll right I will send you an email or shortly and then just let me know if you have any questions okay  all right thank you take care talk to you  bye\", 0.6, 388.89, 'anonymous')]]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"
}
Response headers

after adding the changes 
from fastapi import APIRouter, File, UploadFile, HTTPException, Depends
from sqlalchemy.orm import Session
import pandas as pd
import io
from typing import List
from database import SessionLocal
from schemas import FileUploadResponse
import json
from crud import persist_dashboard_entries
from auth import get_current_active_user, get_current_user_optional
from models import User

router = APIRouter()

def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()

@router.post(
    "/upload", 
    response_model=FileUploadResponse,
    summary="Upload benchmark Excel file",
    description="Upload and process an Excel file containing ASR benchmark data",
    response_description="Processed benchmark data ready for analysis",
    responses={
        200: {"description": "File processed successfully"},
        400: {"description": "Invalid file format or missing required columns"},
        500: {"description": "Server error during file processing"}
    },
    tags=["Benchmarks"]
)
async def upload_benchmark_file(
    file: UploadFile = File(
        ..., 
        description="Excel file (.xlsx or .xls) containing benchmark data",
        media_type="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
    ),
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user_optional)
):
    """
    Upload and process an Excel file containing ASR benchmark data.
    
    **Required Excel columns:**
    - Audio File Name: Name of the audio file tested
    - Audio Length: Duration of audio in seconds
    - Model: Name of the ASR model used
    - Ground_truth: Correct transcription text
    - Transcription: Model's transcription output
    - WER Score: Word Error Rate as a decimal (0.0 to 1.0)
    - Inference time (in sec): Processing time in seconds
    
    **File Requirements:**
    - Format: Excel (.xlsx or .xls)
    - Size: Maximum 50MB
    - Structure: First row must contain column headers
    
    **Returns:**
    - Processed data array ready for dashboard analysis
    - Summary message with processing statistics
    
    **Errors:**
    - 400: Invalid file format or missing required columns
    - 400: Invalid data types in rows
    - 500: Server processing error
    """
    user_id = current_user.id if current_user else "anonymous"
    # Validate file type
    if not file.filename or not file.filename.endswith(('.xlsx', '.xls')):
        raise HTTPException(status_code=400, detail="File must be an Excel file (.xlsx or .xls)")
    
    try:
        # Read the uploaded file
        contents = await file.read()
        
        # Parse Excel file using pandas
        df = pd.read_excel(io.BytesIO(contents))
        
        # Validate required columns
        required_columns = [
            'Audio File Name', 'Audio Length', 'Model', 
            'Ground_truth', 'Transcription', 'WER Score', 
            'Inference time (in sec)'
        ]
        
        missing_columns = [col for col in required_columns if col not in df.columns]
        if missing_columns:
            raise HTTPException(
                status_code=400, 
                detail=f"Missing required columns: {', '.join(missing_columns)}"
            )
        
        # Convert DataFrame to list of dictionaries
        data = df.to_dict('records')
        
        # Clean and validate data
        processed_data = []
        for i, row in enumerate(data):
            try:
                audio_length_raw = str(row.get("Audio Length", "")).strip()
                
                if audio_length_raw == "" or audio_length_raw.lower() == "nan":
                    audio_length = 0.0

                elif "day" in audio_length_raw:
                    # e.g., "1 day, 0:03:22"
                    day_part, time_part = audio_length_raw.split(",")
                    days = int(day_part.split()[0])
                    parts = list(reversed(time_part.strip().split(":")))
                    seconds = sum(float(x) * (60 ** idx) for idx, x in enumerate(parts))
                    audio_length = days * 86400 + seconds

                elif ":" in audio_length_raw:
                    # e.g., "06:44:00"
                    parts = list(reversed(audio_length_raw.split(":")))
                    audio_length = sum(float(x) * (60 ** idx) for idx, x in enumerate(parts))

                else:
                    audio_length = float(audio_length_raw)
                inf_raw = str(row.get("Inference time (in sec)", "")).strip()
                
                if inf_raw == "" or inf_raw.lower() == "nan":
                    inference_time = 0.0

                elif "day" in inf_raw:
                    day_part, time_part = inf_raw.split(",")
                    days = int(day_part.split()[0])
                    parts = list(reversed(time_part.strip().split(":")))
                    seconds = sum(float(x) * (60 ** idx) for idx, x in enumerate(parts))
                    inference_time = days * 86400 + seconds

                elif ":" in inf_raw:
                    parts = list(reversed(inf_raw.split(":")))
                    inference_time = sum(float(x) * (60 ** idx) for idx, x in enumerate(parts))

                else:
                    inference_time = float(inf_raw)
                
                wer_raw = row.get("WER Score", 0)
                if wer_raw is None or str(wer_raw).strip() == "" or pd.isna(wer_raw):
                    wer_score = 0.0
                else:
                    try:
                        wer_score = float(wer_raw)
                    except:
                        raise HTTPException(
                            status_code=400,
                            detail=f"Invalid WER Score in row {i+2}: {wer_raw}"
                        )
                processed_row = {
                    'Audio File Name': str(row.get('Audio File Name', '')),
                    'Audio Length': audio_length,
                    'Model': str(row.get('Model', '')),
                    'Ground_truth': str(row.get('Ground_truth', '')),
                    'Transcription': str(row.get('Transcription', '')),
                    'WER Score': float(row.get('WER Score', 0)),
                    'Inference time (in sec)': inference_time
                }
                processed_data.append(processed_row)
            except (ValueError, TypeError) as e:
                raise HTTPException(
                    status_code=400, 
                    detail=f"Invalid data in row {i+2}: {str(e)}"
                )
        
        if not processed_data:
            raise HTTPException(status_code=400, detail="No valid data found in the file")
        
        persist_dashboard_entries(db, processed_data, user_id)
        
        return FileUploadResponse(
            data=processed_data,
            message=f"Successfully processed {len(processed_data)} rows from {file.filename}"
        )
        
    except pd.errors.EmptyDataError:
        raise HTTPException(status_code=400, detail="The uploaded file is empty")
    except pd.errors.ParserError as e:
        raise HTTPException(status_code=400, detail=f"Failed to parse the Excel file: {str(e)}")
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"An error occurred while processing the file: {str(e)}")
    finally:
        await file.close()
